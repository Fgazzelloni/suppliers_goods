---
title: "Marketing Data Scientist HW Assignment"
author: "Stefan Musch </br><i>Head of Product</br>2024-02-27</i>"
output:
  g6tr.reports::g6tr_html_report:
    floating_toc: true
    fig_width: 7
    fig_height: 7
    thumbnails: false
    lightbox: true
    gallery: true
---

```{r setup, include=FALSE}
# Global R Chunk settings
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message = FALSE,
                      eval = TRUE,
                      fig.align = "center") 


```

```{r libraries, include = FALSE}
library(downloadthis)
library(g6tr.reports)
library(haven)
library(tidyverse)
```

# Introduction

Welcome! We are thrilled to proceed the hiring process by seeing how you tackle an actual client project we recently delivered.

We will be evaluating your analytical skills, the quality of your code and your ability to synthesize the results clearly to a non-technical audience. 

With these goals in mind, please

- Create and knit an `RMarkdown` document where you analyze the data
  * Feel free to style the document to your liking
- Create a document (can be an RMarkdown, Word or GDocs document or even a PPT or GSlides deck, whatever you feel most comfortable in) that synthesizes the results clearly
  * Imagine this document would go directly to our end client as a first draft of work
- Send all the files back to us over email

We realize the effort this requires, and we truly value your willingness to participate. We will provide extensive feedback, regardless if we'd like to move forward with you as a candidate. If we do decide to move forward with you in this hiring process, we'll reach out to plan a single 90 minute interview, after which we will be able to make our final decision.

Thanks in advance,

_Stefan_

# Assignment context

As our client (a company that produces healthy beverages) enters its next wave of growth, it needs data driven insights to inform where to fuel this expansion. First and foremost, [brand] wanted to understand the value-based mindsets and behaviors of its potential customer segments. 

We fielded a survey to a representative sample of 1,000 U.S. adults interested in health and trying new things. The survey included a battery of 51 psychographic survey items to surface the segments of Americans most likely to be interested in [kombucha](https://en.wikipedia.org/wiki/Kombucha) according to several dimensions (e.g., openness and adventure, healthy lifestyles, values alignment). The segmentation is a useful heuristic for understanding and targeting [brand]â€™s current and potential future audiences based on values and behaviors that are key to activating kombucha drinkers.

## Analysis

For this assignment, we would like you to do two things:

 - Create clear and concise segments from the psychograhic battery of questions
 - Use the demographic variables as profiling / explanatory variables only (don't include these in the clustering process)
 
The goal is to group like-minded people together based on their mindsets and attitudes, not their demographic profile. How you get to these segments (and how many) is up to you, as long as it's guided by statistical best practices. 

As mentioned earlier, write your analysis and code in an `.Rmarkdown` file and write a memo synthesizing the results in a medium of your choice. Imagine that we are the end client, and we want to know what type of customers are out there, and which ones are more or less likely to try kombucha in particular, and why.


## Data

As a market research company, we typically collect our own data through surveys (similar to the intake survey we had you take). The benefit to this is that we can control how the data is structured, which will typically result in a pretty clean file. The data you'll be using was obtained in the same way, and followed our standard process:

1. Write survey outline
2. Program survey in [Qualtrics](https://www.qualtrics.com/uk/?rid=ip&prevsite=en&newsite=uk&geo=NL&geomatch=uk)
3. Field survey to a representative panel (e.g., [Dynata](https://www.dynata.com/))
4. Collect responses from the Panel
5. Finalize data collection and export data as a `.sav` file

Please download the dataset by clicking on the button below. The dataset is stored as an `.RDS` file and you can read it as follows: `assignment_data <- readRDS('assignment_data.rds')`

```{r download_data}
bubbly_main <-
  aws.s3::s3read_using(
    read_sav,
    object = '2020-09-18_bubbly_master.sav',
    bucket = 'monorepo-data/bubbly/data'
    )

bubbly_assignment <- bubbly_main %>% 
  select(response_id, starts_with('d_'), starts_with('s_'), contains('m1_battery'), -contains('_do_')) %>% 
  select(-s_consent, -d_zip, -contains('s_humm_'), -contains('s_consumption'), -contains('aware_')) %>%
  rename_all(function(x){gsub('s_', 'd_', x)}) %>%
  rename_all(function(x){gsub('m1_', 'seg_', x)})

bubbly_assignment %>% 
  download_this(
    output_name = "assignment_data",
    output_extension = ".rds",
    button_label = "Download assignment data",
    button_type = "success",
    self_contained = TRUE,
    has_icon = TRUE,
    icon = "fa fa-save"
  )
```

The original data file was a `.sav` file, which appends labels to the variable names and variable levels. Check it out by calling `labelled::var_label()` on one of the variables to see how that works. Additionally, use `haven::as_factor()` to convert the character variables to factors using the attached levels.

Finally the dataset has two types of data:

- All variables starting with `d_` to indicate the demographic features of the respondent
- All variables starting with `seg_` to indicate the variables necessary to build the segmentation on

Please use all the `seg_` variables to build the segmentation, and use the `d_` variables to understand how the segments you've created are different from one another demographically. 

If you have any questions regarding the assignment, please don't hesitate to contact us.

Good luck!

